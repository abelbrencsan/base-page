/*!
 * Chart CSS component
 * Author: Abel Brencsan
 * Licensed under the MIT license
 */

/* Chart component variables */
div.chart {
	--chart-color-1: #0369a1;
	--chart-color-2: #b91c1c;
	--chart-color-3: #eab308;
	--chart-color-4: #15803d;
	--chart-color-5: #4338ca;
	--chart-color-6: #4338ca;
	--chart-color-7: #4338ca;
	--chart-color-8: #4338ca;
	--chart-gap: 0.05;
}

/* Chart component prototype */
div.chart {
	display: grid;
	grid-template-areas: "heading heading" "labels plot" ". categories" ". legends";
	grid-template-columns: auto 1fr;
	margin-bottom: var(--element-margin);

	h1, h2, h3, h4, h5, h6, .heading {
		font-size: var(--large-font-size);
		grid-area: heading;
		text-align: center;
		margin-bottom: var(--heading-margin);
	}

	svg.chart-plot {
		grid-area: plot;
	}

	ul.chart-label-list {
		grid-area: labels;
	}

	ul.chart-category-list {
		grid-area: categories;
	}

	ul.chart-legend-list {
		grid-area: legends;
	}

	@media (max-width: 47em) {

		ul.chart-label-list, ul.chart-category-list > li ul.chart-category-value-list {
			display: none;
		}
	}
}

/* Chart component extensions */
div.chart {
}

/* Chart plot component prototype */
svg.chart-plot {
	display: block;
	height: 100%;
	width: 100%;

	&.chart-plot--bar, &.chart-plot--line {

		&.chart-plot--10 {
			background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 20), #ffffff calc(100% / 20), #ffffff calc(100% / 10));
		}

		&.chart-plot--9 {
			background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 18), #ffffff calc(100% / 18), #ffffff calc(100% / 9));
		}

		&.chart-plot--8 {
			background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 16), #ffffff calc(100% / 16), #ffffff calc(100% / 8));
		}

		&.chart-plot--7 {
			background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 14), #ffffff calc(100% / 14), #ffffff calc(100% / 7));
		}

		&.chart-plot--6 {
			background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 12), #ffffff calc(100% / 12), #ffffff calc(100% / 6));
		}
	}

	&.chart-plot--bar {
		
		g.chart-plot-dataset {

			rect.chart-plot-dataset-data {

				&:nth-of-type(1) {
					fill: var(--chart-color-1);
				}

				&:nth-of-type(2) {
					fill: var(--chart-color-2);
				}

				&:nth-of-type(3) {
					fill: var(--chart-color-3);
				}

				&:nth-of-type(4) {
					fill: var(--chart-color-4);
				}

				&:nth-of-type(5) {
					fill: var(--chart-color-5);
				}

				&:nth-of-type(6) {
					fill: var(--chart-color-6);
				}

				&:nth-of-type(7) {
					fill: var(--chart-color-7);
				}

				&:nth-of-type(8) {
					fill: var(--chart-color-8);
				}
			}
		}
	}

	&.chart-plot--line {

		g.chart-plot-dataset {

			polyline.chart-plot-dataset-area {
				opacity: 0.2;
				stroke: none;
			}

			polyline.chart-plot-dataset-data {
				fill: none;
				stroke-width: 3px;
			}

			&:nth-of-type(1) {

				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-1);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-1);
				}
			}

			&:nth-of-type(2) {

				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-2);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-2);
				}
			}

			&:nth-of-type(3) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-3);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-3);
				}
			}

			&:nth-of-type(4) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-4);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-4);
				}
			}

			&:nth-of-type(5) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-5);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-5);
				}
			}

			&:nth-of-type(6) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-6);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-6);
				}
			}

			&:nth-of-type(7) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-7);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-7);
				}
			}

			&:nth-of-type(8) {
				
				polyline.chart-plot-dataset-data {
					stroke: var(--chart-color-8);
				}

				polyline.chart-plot-dataset-area, circle.chart-plot-dataset-marker {
					fill: var(--chart-color-8);
				}
			}
		}
	}

	&.chart-plot--pie {

		g.chart-plot-dataset {

			circle.chart-plot-dataset-donut {
				fill: var(--bg-color);
			}

			path.chart-plot-dataset-data {
				stroke-width: 2px;
				stroke: var(--bg-color);

				&:nth-of-type(1) {
					fill: var(--chart-color-1);
				}

				&:nth-of-type(2) {
					fill: var(--chart-color-2);
				}

				&:nth-of-type(3) {
					fill: var(--chart-color-3);
				}

				&:nth-of-type(4) {
					fill: var(--chart-color-4);
				}

				&:nth-of-type(5) {
					fill: var(--chart-color-5);
				}

				&:nth-of-type(6) {
					fill: var(--chart-color-6);
				}

				&:nth-of-type(7) {
					fill: var(--chart-color-7);
				}

				&:nth-of-type(8) {
					fill: var(--chart-color-8);
				}
			}
		}
	}

	@media (max-width: 47em) {

		&.chart-plot--bar, &.chart-plot--line {

			&.chart-plot--10 {
				background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 10), #ffffff calc(100% / 10), #ffffff calc(100% / 5));
			}

			&.chart-plot--9 {
				background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 9), #ffffff calc(100% / 9), #ffffff calc(100% / 4.5));
			}

			&.chart-plot--8 {
				background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 8), #ffffff calc(100% / 8), #ffffff calc(100% / 4));
			}

			&.chart-plot--7 {
				background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 7), #ffffff calc(100% / 7), #ffffff calc(100% / 3.5));
			}

			&.chart-plot--6 {
				background-image: repeating-linear-gradient(180deg, var(--border-bg-color), var(--border-bg-color) calc(100% / 6), #ffffff calc(100% / 6), #ffffff calc(100% / 3));
			}
		}
	}
}

/* Chart plot component extensions */
svg.chart-plot {
}

/* Chart label list component prototype */
ul.chart-label-list {
	display: flex;
	flex-flow: column wrap;
	font-size: var(--small-font-size);
	justify-content: space-between;
	line-height: 1;
	list-style: none;
	margin-bottom: 0;
	margin-right: 0.5rem;
	padding-left: 0;
	text-align: right;
	min-width: 2rem;

	> li {
		padding-left: 0;
	}
}

/* Chart label list component extensions */
ul.chart-label-list {
}

/* Chart category list component prototype */
ul.chart-category-list {
	display: flex;
	flex-flow: row wrap;
	font-size: var(--small-font-size);
	justify-content: space-around;
	list-style: none;
	margin-bottom: 0;
	margin-top: var(--block-margin);
	padding-left: 0;
	text-align: center;

	> li {
		flex: 1;
		padding-left: 0;

		ul.chart-category-value-list {
			display: flex;
			flex-flow: row wrap;
			justify-content: space-around;
			list-style: none;
			margin-bottom: 0;
			padding-left: 0;
			text-align: center;

			> li {
				padding-left: 0;
			}
		}
	}

	div.chart.chart--bar & {

		> li {
			padding: 0 calc(min(90vw, var(--container-width)) * (var(--chart-gap) * 0.5));
		}
	}

	div.chart.chart--line & {
		justify-content: space-between;

		> li {
			flex: 0 1 auto;
			padding: 0;
		}
	}
}

/* Chart category list component extensions */
ul.chart-category-list {
}

/* Chart legend list component prototype */
ul.chart-legend-list {
	display: flex;
	flex-flow: row wrap;
	justify-content: center;
	list-style: none;
	margin-bottom: 0;
	margin-top: var(--block-margin);
	padding-left: 0;
	text-align: center;

	> li {
		padding: 0.25rem;

		&:before {
			background-color: var(--border-color);
			border-radius: 50%;
			content: "";
			display: inline-block;
			height: var(--small-font-size);
			margin-right: 0.5rem;
			vertical-align: middle;
			width: var(--small-font-size);
		}

		&:nth-child(1):before {
			background-color: var(--chart-color-1);
		}

		&:nth-child(2):before {
			background-color: var(--chart-color-2);
		}

		&:nth-child(3):before {
			background-color: var(--chart-color-3);
		}

		&:nth-child(4):before {
			background-color: var(--chart-color-4);
		}

		&:nth-child(5):before {
			background-color: var(--chart-color-5);
		}

		&:nth-child(6):before {
			background-color: var(--chart-color-6);
		}

		&:nth-child(7):before {
			background-color: var(--chart-color-7);
		}

		&:nth-child(8):before {
			background-color: var(--chart-color-8);
		}
	}
}

/* Chart legend list component extensions */
ul.chart-legend-list {
}